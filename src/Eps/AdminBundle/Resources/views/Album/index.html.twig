{% extends "::base.html.twig" %}


{% block content %}

	<h2>Gestion des albums photo</h2>

	<h3>Création d'un album</h3>
	<form action="{{ path('admin_album_create') }}" method="post">
		Titre : <input type="text" name="title" class="input-medium search-query" />
		<input type="submit" class="btn" />
	</form>


	<h3>Albums disponibles</h3>
	{% if albums|length > 0 %}

	<table class="table table-striped table-condensed">
		<tr>
			<th>#</th>
			<th>Miniature</th>
			<th>Titre</th>
			<th>Statut</th>
			<th>Actions</th>
		</tr>
	{% for album in pagerfanta.currentPageResults %}

 		<tr>
 			<td>{{ album.id }}</td>
 			<td>
 				<div class="album-box-thumb-admin">
				<img src="{{ asset('miniatures/' ~ album.id ~ '/' ~ album.thumb) }}" class="img-polaroid" alt="" />
				</div>
			</td>
 			<td>
 				<h5 style="margin: 1px;">{{ album.name }}</h5>
	 			<p style="float:left; width: 180px;"><i class="icon-user"></i>
				Auteur{% if album.reporters|length > 1%}s{% endif%} : 
				{% for reporter in album.reporters %}
					<strong>{{ reporter.pseudo }}</strong>
					{% if not loop.last %},{% endif %}
				{% endfor %}
				</p>

				<p style="float:left;width: 200px;"><i class="icon-tag" style=""></i>
				Catégorie : <strong>{{ album.category.title }}</strong>
				</p>
				
				<p style="float:left;margin-right: 20px;">
					<i class="icon-eye-open"></i>
					<strong>{{ album.getVisitCount }}</strong>
					vue{% if album.getVisitCount|length > 1%}s{% endif%}
				</p>
			</td>

			<td>
				<p style="color: green;">Published</p>
			</td>
 			<td>
 				<i class="icon-edit" style=""></i>
 				<a href="{{ path('admin_static_edit', {'id': album.id}) }}">Modifier</a>

 				<i class="icon-trash" style=""></i>
 				<a href="{{ path('admin_static_delete', {'id': album.id}) }}">Supprimer</a>

 			</td>
 		</tr>
 	{% endfor %}
    </table>

    {{ pagerfanta(pagerfanta, 'twitter_bootstrap', {'routeName': 'admin_album_paginated'}) }}

    {% else %}
    <div class="alert alert-info">
    	Il n'y a aucun album disponible.
    </div>
    {% endif %}
	
{% endblock %}